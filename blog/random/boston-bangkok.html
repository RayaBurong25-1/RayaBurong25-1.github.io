<HTML>
    <head>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Anonymous+Pro&display=swap">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="../../rayaburong.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>arun.</title>
    </head>
    <body class="row u-no-margin u-dark-text">
        <div class="u-flex-grow"></div>
        <div class="u-flex-grow" style="max-width: 1000px;">
            <div align="center" class="u-orange-back u-white-text u-thicc" width="100%" id="arun">
                <h1><a href="../../index.html" class="u-inherit-color">arun</a> > Blog > Random.</h1>
                <p id="title">[006] Boston Bangkok</p>
                <p>8 May, 2020</p>
            </div>
            <div align="center" class="u-dark-back">
                <img width="100%" class="u-restricted-width u-center" style="object-fit:cover" src="boston-bangkok.png" />
            </div>
            <div>
                <p align="center" class="u-gray-text"><i>Wait... something's not right here...</i></p>
                <p>Just before I was evicted from MIT this past March, a couple of friends and I went for a lunch down near Central Square. They asked me if I lived in Bangkok, to which I said yes. Then they asked me: "Where in Bangkok?" It was a hard question to answer, and the best answer I could think of was... in the suburbs, quite far away from the city center. I tried to make an analogy with Boston's T, but it flopped because I didn't know which station my house would correspond to - I just don't have a grasp of how big the T spans in comparison to Bangkok's BTS, MRT and ARL. I was like... "maybe Braintree distance away from the city center if we measure from Downtown Crossing?" It was useless because I couldn't know if it was true, and they didn't know where Braintree is, either.</p>
                <p>Just today, after leaving this thought on the shelf for a long time, I decided to fully investigate. What would it look like if I overlayed Boston's MBTA system on top of Bangkok's geography? I first found a handy .kmz that contained Boston's train lines, plus extra information into the future about the Green Line Extension <a href="https://www.mbta.com/projects/green-line-extension-glx">here</a>. I was thinking for a while as to how I would shift all these points in the drawing onto Bangkok, until I searched up what .kmz looks like. A .kmz is merely a .zip with a .kml inside, which has .xml notation. Sweet! I downloaded the .kmz, changed the type extension to .zip then opened up the .kml to check. It's exactly that.</p>
                <p>The job is much easier now that I can read the .kml. I scrolled through and saw that all the points are on their own lines, and those lines only contained 12 spaces in the front, a longitude, a latitude and an elevation. That's it! I wrote a quick small <a href="kmz_shift.py">python script</a> to shift those numbers (where Downtown Crossing would correspond to Siam) and it's done.</p>
                <p align="center"><a href="https://www.google.com/maps/d/drive?state=%7B%22ids%22%3A%5B%221FLw8TDHTiLa6-EU4-13gYjzA7C2kTAyU%22%5D%2C%22action%22%3A%22open%22%2C%22userId%22%3A%22104951504414351425761%22%7D&usp=sharing"><i>Boston MBTA Onto Bangkok</i></a></p>
                <div class="u-egg-back">
                    <h3>Conclusion</h3>
                    <p>Bangkok is <b>HUGE</b>. Alewife, the terminal station for the northern end of the Red Line, corresponds to the villages of Taling Chan. Oak Grove, the terminal station for the northern end of the Orange Line, already in Malden which is two cities north of Boston, corresponnds to Wong Sawang of the Purple Line MRT - the third of 16 stations outbound. I've been to the far end of the Purple Line, and it definitely feels a bit more in the city than Alewife or Oak Grove. One sad thing about Bangkok is that it doesn't currently have a line in the same direction as MBTA Blue Line and my home is in that general direction. What's more... you my home is even outside the extent of that image. Much far, so suburb - explains why it takes me 1.5-2 hours to get to Siam a.k.a "Downtown Crossing".</p>
                </div>
                <p>Will see if I can try do the other way around...</p>
            </div>
        </div>
        <div class="u-flex-grow"></div>
    </body>
    <script>
        const canvas = document.getElementById('gameoflife');
        const ctx = canvas.getContext('2d');
        const sz = 50;
        const dot = 10;
        let board = new Array(sz);
        let temp = new Array(sz);
        let qsum = new Array(sz);
        for (let i = 0; i < sz; i++)
        {
            board[i] = new Array(sz);
            temp[i] = new Array(sz);
            for (let j = 0; j < sz; j++)
                board[i][j] = 0;
            qsum[i] = new Array(sz);
        }
        draw();
        
        document.addEventListener('keydown', logKey);
        canvas.addEventListener('click', mouse);
        let id = null;
        function logKey(e)
        {
            switch (e.code)
            {
                case "Enter":
                    if (id === null)
                        id = setInterval(step, 100);
                    else
                    {
                        clearInterval(id);
                        id = null;
                    }
                    break;
                case "Space":
                    step();
                    break;
                case "Escape":
                    clearCanvas();
                    clearInterval(id);
                    id = null;
                    break;
            }
        }

        function draw()
        {
            ctx.clearRect(0, 0, dot*sz, dot*sz);
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, dot*sz, dot*sz);
            ctx.fillStyle = 'white';
            for (let i = 0; i < sz; i++)
                for (let j = 0; j < sz; j++)
                    if (board[i][j] == 1)
                        ctx.fillRect(i*dot, j*dot, dot, dot);
        }

        function clearCanvas()
        {
            for (let i = 0; i < sz; i++)
                for (let j = 0; j < sz; j++)
                    board[i][j] = 0;
            draw();
        }

        function step()
        {
            for (let i = 0; i < sz; i++)
            {
                for (let j = 0; j < sz; j++)
                {
                    qsum[i][j] = board[i][j];
                    if (i > 0) qsum[i][j] += qsum[i-1][j];
                    if (j > 0) qsum[i][j] += qsum[i][j-1];
                    if (i > 0 && j > 0) qsum[i][j] -= qsum[i-1][j-1];
                    temp[i][j] = board[i][j];
                }
            }
            // console.log(qsum);
            let maxi, maxj, mini, minj, neigh;
            for (let i = 0; i < sz; i++)
            {
                for (let j = 0; j < sz; j++)
                {
                    maxi = Math.min(i+1, sz-1);
                    maxj = Math.min(j+1, sz-1);
                    mini = Math.max(i-2, -1);
                    minj = Math.max(j-2, -1);
                    if (mini < 0 && minj < 0)
                        neigh = qsum[maxi][maxj] - temp[i][j];
                    else if (mini < 0)
                        neigh = qsum[maxi][maxj] - qsum[maxi][minj] - temp[i][j];
                    else if (minj < 0)
                        neigh = qsum[maxi][maxj] - qsum[mini][maxj] - temp[i][j];
                    else
                        neigh = qsum[maxi][maxj] - qsum[mini][maxj] - qsum[maxi][minj] + qsum[mini][minj] - temp[i][j];
                    // if (temp[i][j] == 1)
                        // console.log(i, j, temp[i][j], neigh);

                    if (temp[i][j] == 1)
                    {
                        if (neigh < 2 || neigh > 3)
                            board[i][j] = 0;
                    }
                    else if (neigh == 3)
                        board[i][j] = 1;
                }
            }
            draw();
        }

        function mouse(e)
        {
            if (id !== null)
            {
                clearInterval(id);
                id = null;
            }
            let rect = canvas.getBoundingClientRect();
            let x = Math.floor((e.clientX - rect.left)/dot);
            let y = Math.floor((e.clientY - rect.top)/dot);
            board[x][y] = 1 - board[x][y];
            draw();
        }
    </script>
</HTML>
